SAVEPOINT dump;
PRAGMA writable_schema=ON;
SELECT name, type, sql FROM sqlite_schema WHERE (name LIKE 'subscriptions' ESCAPE '\') AND type=='table'  AND sql NOT NULL ORDER BY tbl_name='sqlite_sequence', rowid;
PRAGMA table_info='subscriptions';
SELECT id,user_id,movie_id,created_at,deleted_at FROM subscriptions;
SELECT sql FROM sqlite_schema WHERE (name LIKE 'subscriptions' ESCAPE '\') AND sql NOT NULL  AND type IN ('index','trigger','view');
PRAGMA writable_schema=OFF;
RELEASE dump;
drop table subscriptions
;
SAVEPOINT dump;
PRAGMA writable_schema=ON;
SELECT name, type, sql FROM sqlite_schema WHERE (name LIKE 'subscriptions' ESCAPE '\') AND type=='table'  AND sql NOT NULL ORDER BY tbl_name='sqlite_sequence', rowid;
SELECT sql FROM sqlite_schema WHERE (name LIKE 'subscriptions' ESCAPE '\') AND sql NOT NULL  AND type IN ('index','trigger','view');
PRAGMA writable_schema=OFF;
RELEASE dump;
BEGIN TRANSACTION;
CREATE TABLE subscriptions(id int primary key not null,
user_id int not null,
movie_id int not null, created_at text not null, deleted_at text null,
foreign key(user_id) references users(id));
SELECT DISTINCT candidate COLLATE nocase  FROM completion('') ORDER BY 1;
-- PRAGMA database_list;
-- PRAGMA database_list;
-- SELECT name FROM "main".sqlite_schema;
-- PRAGMA database_list;
-- SELECT pti.name FROM "main".sqlite_schema AS sm JOIN pragma_table_info(sm.name,'main') AS pti WHERE sm.type='table';
-- PRAGMA 'main'.table_info='users';
-- PRAGMA 'main'.table_info='subscriptions';
